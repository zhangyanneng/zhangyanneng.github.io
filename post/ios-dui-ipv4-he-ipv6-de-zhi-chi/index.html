<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>iOS 对ipv4 和ipv6的支持 | 落寒</title>
<meta name="description" content="立事者，不惟有超世之才，亦必有坚忍不拔之志。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://zhangyanneng.github.io/favicon.ico?v=1561631784720">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zhangyanneng.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://zhangyanneng.github.io">
        <img src="https://zhangyanneng.github.io/images/avatar.png?v=1561631784720" class="site-logo">
        <h1 class="site-title">落寒</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/zhangyanneng" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      立事者，不惟有超世之才，亦必有坚忍不拔之志。
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://zhangyanneng.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">iOS 对ipv4 和ipv6的支持</h2>
            <div class="post-date">2019-06-26</div>
            
            <div class="post-content">
              <!-- IPv6 是“互联网协议第 6 版”的缩写。IPv6 是互联网的下一代协议，用于取代当前的互联网协议，即 IP 第 4 版。 -->
<h3 id="1什么是ipv6">1.什么是IPv6？</h3>
<p>IPv6 是“互联网协议第 6 版”的缩写。IPv6 是互联网的下一代协议，用于取代当前的互联网协议，即 IP 第 4 版。
为了通过互联网进行通信，电脑和其他设备必须有发送者和接收者地址。这些数字地址称为互联网协议地址。由于互联网的普及以及使用人数大幅增长，因此对于 IP 地址的需求也与日俱增。
IPv6 是由互联网工程任务组（一个开发互联网技术的组织）所开发的标准。由于预计到对 IP 地址的需求不断增加，因此 IETF 制订了 IPv6 来应对越来越多的互联网用户数和设备。
IPv6 使用更大的数字创建 IP 地址，可让更多用户和设备通过 Internet 进行通信。在使用 IPv4 的情况下，每个 IP 地址的长度是 32 位，共可允许 43 亿个独一无二的地址。IPv4 地址示例如下：
172.16.254.1
相比之下，IPv6 地址是 128 位，共可允许近 340 万亿个独一无二的 IP 地址。IPv6 地址示例如下：
2001:db8:ffff:1:201:02ff:fe03:0405
IPv6 还有其他网络优势。大多数情况下，电脑和应用程序会检测并利用支持 IPv6 的网络和服务，不需要用户进行任何操作。IPv6 还能缓解由于 IPv4 提供的地址数量有限而造成的其他网络问题。例如，IPv6 减少了网络地址转换的需求，此服务可让多个客户端共享一个 IP 地址，但不一定都可靠。</p>
<p>要测试 IPv6 的连接，您可以访问“<a href="http://test-ipv6.com/">测试您的 IPv6</a>”。</p>
<h3 id="2ios中需要做兼容性处理的">2.iOS中需要做兼容性处理的</h3>
<p>下图中蓝色部分API是不需要考虑的，苹果已经在iOS9之后进行了支持，红色部分是需要自己去支持ipv6的，需要注意。
<img src="https://zhangyanneng.github.io/post-images/1561520104882.png" alt=""></p>
<p>需要支持的参考<a href="https://tools.ietf.org/html/rfc4038">Application Aspects of IPv6 Transition</a></p>
<h3 id="3reachability中已经添加了对ipv6的支持">3.Reachability中已经添加了对IPv6的支持</h3>
<p><a href="https://github.com/AFNetworking/AFNetworking/pull/3174/files">Added support for IPv6 to Reachability #3174</a></p>
<h3 id="4不兼容ipv6的api">4.不兼容IPv6的API</h3>
<p>以下是针对IPv4进行处理的API，需要进行替换和删除</p>
<pre><code>inet_addr()
inet_aton()
inet_lnaof()
inet_makeaddr()
inet_netof()
inet_network()
inet_ntoa()
inet_ntoa_r()
bindresvport()
getipv4sourcefilter()
setipv4sourcefilter()
</code></pre>
<p>以下方法需要对应处理
<img src="https://zhangyanneng.github.io/post-images/1561520625410.png" alt=""></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://zhangyanneng.github.io/tag/l1KUIceO-" class="tag">
                    iOS
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://zhangyanneng.github.io/post/cocoapods">
                  <h3 class="post-title">
                    CocoaPods
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
